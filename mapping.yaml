---
use_single_id_space: true
areas:
  area_tags:
    - building
    - landuse
    - leisure
    - waterway
    # - natural
    - aeroway
  linear_tags:
    - highway
    - barrier
tags:
  include:
    - access
    - covered
    - denotation
    - disused
    - drinking_water
    - ele
    - fee
    - icao
    - intermittent
    - protected
    - ref
    - refitted
    - seasonal
    - shelter_type
    - tower:type
    - water_characteristic
    - wetland
generalized_tables:
  waterareas_gen1:
    source: waterareas
    sql_filter: ST_Area(geometry)>50000.000000
    tolerance: 50
  waterareas_gen0:
    source: waterareas_gen1
    sql_filter: ST_Area(geometry)>500000.000000
    tolerance: 200
  roads_gen0:
    source: roads
    sql_filter:
      type IN ('motorway', 'motorway_link', 'trunk', 'trunk_link', 'primary',
      'primary_link', 'secondary', 'secondary_link', 'tertiary', 'tertiary_link')
      OR class IN('railway')
    tolerance: 200
  roads_gen1:
    source: roads
    sql_filter:
      type IN ('motorway', 'motorway_link', 'trunk', 'trunk_link', 'primary',
      'primary_link', 'secondary', 'secondary_link', 'tertiary', 'tertiary_link')
      OR class IN('railway')
    tolerance: 50
  waterways_gen0:
    source: waterways_gen1
    sql_filter: type='river'
    tolerance: 200
  waterways_gen1:
    source: waterways
    sql_filter: type='river'
    tolerance: 50
  landcovers_gen1:
    source: landcovers
    sql_filter: ST_Area(geometry)>50000.000000
    tolerance: 50
  landcovers_gen0:
    source: landcovers_gen1
    sql_filter: ST_Area(geometry)>500000.000000
    tolerance: 200
  route_members_gen0:
    source: route_members_gen1
    tolerance: 200
  route_members_gen1:
    source: route_members
    tolerance: 50
  admin_members_gen0:
    source: admin_members_gen1
    tolerance: 200
  admin_members_gen1:
    source: admin_members
    tolerance: 50

tables:
  admin_relations:
    type: relation
    relation_types: [boundary]
    mapping:
      boundary: [administrative]
    filters:
      require:
        admin_level: ["2"]
    columns:
      - { name: osm_id, type: id }
      - { name: admin_level, type: integer, key: admin_level }
      - { name: iso3166_1, type: string, key: "ISO3166-1" }

  admin_members:
    type: relation_member
    relation_types: [boundary]
    mapping:
      boundary: [administrative]
    filters:
      require:
        admin_level: ["2"]
    columns:
      - { name: osm_id, type: id }
      - { name: member, type: member_id }
      - { name: geometry, type: geometry }
      - { name: role, type: member_role, key: role }
      - { name: type, type: member_type }

  routes:
    type: relation
    relation_types:
      - route
    mapping:
      route:
        - hiking
        - bicycle
        - ski
        - horse
        - piste
        - foot
        - mtb
        - running
    columns:
      - name: osm_id
        type: id
      - name: name
        type: string
        key: name
      - name: ref
        type: string
        key: ref
      - name: colour
        type: string
        key: colour
      - name: state
        type: string
        key: state
      - name: osmc:symbol
        type: string
        key: osmc:symbol
      - name: network
        type: string
        key: network
      - name: type
        type: mapping_value

  route_members:
    type: relation_member
    relation_types:
      - route
    mapping:
      route:
        - hiking
        - bicycle
        - ski
        - horse
        - piste
        - foot
        - mtb
        - running
    columns:
      - name: osm_id
        type: id
      - name: member
        type: member_id
      - name: geometry
        type: geometry
      - name: role
        type: member_role
        key: role
      - name: type
        type: member_type

  landcovers:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
      - name: area
        type: webmerc_area
      - name: tags
        type: hstore_tags
        args:
          include:
            - wetland
    type: polygon
    mappings:
      man_made:
        mapping:
          man_made:
            - clearcut
            - bunker_silo
            - silo
            - storage_tank
            - wastewater_plant
            - bridge
      amenity:
        mapping:
          amenity:
            - university
            - school
            - college
            - library
            - parking
            - hospital
            - grave_yard
      leisure:
        mapping:
          leisure:
            - park
            - garden
            - playground
            - golf_course
            - sports_centre # TODO
            - pitch
            - stadium
            - dog_park # TODO
            - track
      tourism:
        mapping:
          tourism:
            - zoo
            - theme_park
      natural:
        mapping:
          natural:
            - bare_rock
            - beach
            - blockfield
            - fell
            - glacier
            - grassland
            - heath
            - moor
            - sand
            - scree
            - scrub
            - shingle # TODO
            - wetland # TODO as overlay layer
            - wood

      landuse:
        mapping:
          landuse:
            - park
            - forest
            - residential
            - retail
            - commercial
            - industrial
            - railway
            - cemetery
            - grass
            - farmyard
            - farm
            - farmland
            - orchard
            - vineyard
            - wood
            - meadow
            - village_green
            - recreation_ground
            - allotments
            - quarry
            - landfill
            - brownfield
            - greenfield
            - depot
            - garages
            - military # TODO maybe as overlay layer
            - plant_nursery
      highway:
        mapping:
          highway:
            - pedestrian
            - footway
      waterway:
        mapping:
          waterway:
            - weir
            - dam

  buildings:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
    type: polygon
    mapping:
      building:
        - __any__

  shops:
    multi_values: [shop]
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
        geometry_transform: point_on_surface
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
    type: point_or_polygon
    mapping:
      shop:
        - __any__

  places:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
      - name: z_order
        type: enumerate
        args:
          values:
            - locality
            - plot
            - isolated_dwelling
            - square
            - farm
            - city_block
            - quarter
            - neighbourhood
            - allotments
            - borough
            - suburb
            - hamlet
            - village
            - town
            - city
            - county
            - region
            - state
            - country
      - name: population
        type: integer
        key: population
    type: point
    mapping:
      place:
        - __any__

  aeroways:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
    type: linestring
    mapping:
      aeroway:
        - runway
        - taxiway

  waterways:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: intermittent
        type: bool
        key: intermittent
      - name: seasonal
        type: bool
        key: seasonal
      - name: tunnel
        type: bool
        key: tunnel
      - name: type
        type: mapping_value
    type: linestring
    mapping:
      waterway:
        - river
        - canal
        - stream
        - drain
        - ditch

  barrierways:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
    type: linestring
    mapping:
      barrier:
        - __any__

  feature_lines:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
        aliases:
          ford:
            __any__: ford
      - name: fixme
        type: string
        key: fixme
    filters:
      reject:
        ford:
          - "no"
    type: linestring
    mapping:
      barrier:
        - ditch # TODO
      ford:
        - __any__
      man_made:
        - cutline
        - embankment
        - dyke
      millitary:
        - trench
      natural:
        - cliff
        - valley
        - tree_row
        - ridge # TODO
        - gully
        - earth_bank
      power:
        - line
        - minor_line
      waterway:
        - dam
        - weir

  pipelines:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: location
        type: string
        key: location
      - name: substance
        type: string # TODO
        key: substance
    type: linestring
    mapping:
      man_made:
        - pipeline

  protected_areas:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
      - name: protect_class
        type: string
        key: protect_class
      - name: area
        type: webmerc_area
    type: polygon
    mapping:
      boundary:
        - national_park
        - protected_area
      leisure:
        - nature_reserve

  features:
    multi_values: [sport, amenity]
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
        geometry_transform: point_on_surface
      - name: name
        type: string
        key: name
      - name: area
        type: webmerc_area
      - name: type
        type: mapping_value
        aliases:
          aerialway:
            station: aerialway_station
          building:
            ruins: building_ruins
            __any__: building
          ford:
            __any__: ford
          historic:
            mine: disused_mine
          mountain_pass:
            yes: mountain_pass
          power:
            tower: power_tower
      - name: tags
        type: hstore_tags
        args:
          include:
            - access
            - covered
            - denotation
            - disused
            - drinking_water
            - ele
            - fee
            - icao
            - intermittent
            - protected
            - ref
            - refitted
            - seasonal
            - shelter_type
            - tower:type
            - water_characteristic
    type: point_or_polygon
    filters:
      reject:
        building:
          - "no"
        ford:
          - "no"
    type_mappings:
      points:
        building:
          - __any__
        ford:
          - __any__
        mountain_pass:
          - "yes"
      any:
        mappings:
          aerialway:
            mapping:
              aerialway:
                - pylon
                - station
          aeroway:
            mapping:
              aeroway:
                - aerodrome
                - helipad
          amenity:
            mapping:
              amenity:
                - animal_boarding
                - animal_breeding
                - animal_shelter
                - animal_training
                - archive
                - arts_centre
                - atm
                - baby_hatch
                - baking_oven
                - bank
                - bar
                - bbq
                - bench
                - bicycle_parking
                - bicycle_rental
                - bicycle_repair_station
                - bicycle_wash
                - biergarten
                - binoculars
                - boat_rental
                - boat_sharing
                - boat_storage
                - border_control
                - brothel
                - bts
                - building_yard
                - bureau_de_change
                - bus_station
                - cafe
                - camping
                - canteen
                - car_pooling
                - car_rental
                - car_sharing
                - car_wash
                - carpet_washing
                - casino
                - chair
                - charging_station
                - checkpoint
                - childcare
                - cinema
                - clinic
                - clock
                - clothes_dryer
                - clubhouse
                - college
                - community_centre
                - compressed_air
                - concert_hall
                - conference_centre
                - courthouse
                - coworking_space
                - crematorium
                - customs
                - dancing_school
                - dentist
                - device_charging_station
                - dive_centre
                - doctors
                - dog_toilet
                - dojo
                - dormitory
                - dressing_room
                - drinking_water
                - driver_training
                - driving_school
                - events_venue
                - exhibition_centre
                - fast_food
                - feeding_place
                - ferry_terminal
                - festival_grounds
                - fire_station
                - food_court
                - food_sharing
                - fountain
                - fuel
                - funeral_hall
                - gambling
                - game_feeding
                - give_box
                - grave_yard
                - grit_bin
                - harbourmaster
                - hookah_lounge
                - hospital
                - hunting_stand
                - hydrant
                - ice_cream
                - internet_cafe
                - kick-scooter_parking
                - kick-scooter_rental
                - kindergarten
                - kitchen
                - kneipp_water_cure
                - language_school
                - lavoir
                - letter_box
                - library
                - library_dropoff
                - loading_dock
                - locker
                - lounge
                - lounger
                - luggage_locker
                - marketplace
                - mobile_library
                - mobility_hub
                - monastery
                - money_transfer
                - mortuary
                - motorcycle_parking
                - motorcycle_rental
                - music_school
                - music_venue
                - nameplate
                - nightclub
                - nursing_home
                - office
                - parcel_locker
                - parking
                - parking_entrance
                - parking_space
                - payment_centre
                - payment_terminal
                - pharmacy
                - photo_booth
                - piano
                - place_of_mourning
                - place_of_worship
                - planetarium
                - police
                - polling_station
                - post_box
                - post_depot
                - post_office
                - power_supply
                - prep_school
                - prison
                - pub
                - public_bath
                - public_bookcase
                - public_building
                - ranger_station
                - reception_desk
                - recycling
                - refugee_site
                - rescue_station
                - research_institute
                - restaurant
                - sanatorium
                - sanitary_dump_station
                - school
                - scooter_parking
                - security_booth
                - shelf
                - shelter
                - shower
                - ski_rental
                - ski_school
                - smoking_area
                - social_centre
                - social_club
                - social_facility
                - spa
                - stables
                - stage
                - stripclub
                - student_accommodation
                - studio
                - surf_school
                - swingerclub
                - table
                - taxi
                - telephone
                - theatre
                - ticket_validator
                - toilets
                - townhall
                - toy_library
                - traffic_park
                - training
                - trolley_bay
                - university
                - vacuum_cleaner
                - vehicle_inspection
                - vehicle_ramp
                - vending_machine
                - veterinary
                - veterinary_pharmacy
                - warehouse
                - washing_machine
                - waste_basket
                - waste_disposal
                - waste_transfer_station
                - water
                - water_point
                - watering_place
                - weighbridge
                - workshop
          # TODO only gate, lift_gate and swing_gate is renderred now
          barrier:
            mapping:
              barrier:
                - block
                - bollard
                - border_control
                - bump_gate
                - chain
                - cycle_barrier
                - debris
                - entrance
                - fence
                - gate
                - hampshire_gate
                - height_restrictor
                - jersey_barrier
                - kissing_gate
                - lift_gate
                - log
                - planter
                - rope
                - sally_port
                - sliding_gate
                - stile
                - swing_gate
                - toll_booth
                - turnstile
                - wall
                - wicket_gate
          boundary:
            mapping:
              boundary:
                - marker
          emergency:
            mapping:
              emergency:
                - access_point
                - ambulance_station
                - defibrillator
                - fire_extinguisher
                - fire_hydrant
                - first_aid_kit
                - lifeguard
                - life_ring
                - mountain_rescue
                - phone
                - siren
                - water_rescue
          highway:
            mapping:
              highway:
                - bus_stop
                - rest_area
                - street_lamp
          historic:
            mapping:
              historic:
                - archaeological_site
                - boundary_stone
                - bunker
                - castle
                - manor
                - memorial
                - mine
                - mine_shaft
                - monastery
                - monument
                - ruins
                - tomb
                - tree_shrine
                - wayside_cross
                - wayside_shrine
          information:
            mapping:
              information:
                - guidepost
                - board
                - map
                - office
                - route_marker
          leisure:
            mapping:
              leisure:
                - beach_resort # TODO
                - bird_hide
                - dog_park # TODO
                - firepit
                - golf_course
                - horse_riding
                - miniature_golf
                - outdoor_seating
                - picnic_table
                - playground
                - resort # TODO
                - sauna
                - water_park
          man_made:
            mapping:
              man_made:
                - adit
                - apiary
                - beehive
                - chimney
                - communications_tower
                - cross
                - forester's_lodge
                - ice_house # TODO
                - mine
                - mineshaft
                - pumping_station
                - reservoir_covered
                - silo
                - spring_box
                - tower
                - mast
                - wastewater_plant
                - water_tower
                - water_well
                - water_works
          military:
            mapping:
              military:
                - bunker
          natural:
            mapping:
              natural:
                - arch
                - birds_nest
                - cave_entrance
                - geyser
                - hot_spring
                - peak
                - rock
                - saddle
                - shrub
                - sinkhole
                - spring
                - stone
                - tree
          power:
            mapping:
              power:
                - pole
                - tower
          railway:
            mapping:
              railway:
                - halt
                - level_crossing # TODO
                - station
                - subway_entrance # TODO
                - tram_stop # TODO
          tourism:
            mapping:
              tourism:
                - alpine_hut
                - apartment
                - artwork
                - attraction
                - camp_site
                - caravan_site
                - castle
                - chalet
                - guest_house
                - hostel
                - hotel
                - memorial
                - monument
                - motel
                - museum
                - picnic_site
                - theme_park
                - viewpoint
                - wilderness_hut
                - zoo
          waterway:
            mapping:
              waterway:
                - waterfall
                - weir
                - dam
          sport:
            mapping:
              sport:
                - 10pin
                - 9pin
                - aikido
                - american_football
                - archery
                - athletics
                - badminton
                - baseball
                - basketball
                - beachvolleyball
                - biathlon
                - billiards
                - bmx
                - boules
                - bowls
                - boxing
                - bullfighting
                - calisthenics
                - canoe
                - chess
                - climbing
                - climbing_adventure
                - cricket
                - cricket_nets
                - croquet
                - crossfit
                - cycling
                - darts
                - disc_golf
                - dog_agility
                - dog_racing
                - dog_training
                - equestrian
                - fencing
                - field_hockey
                - fishing
                - fitness
                - five-a-side
                - football
                - free_flying
                - futsal
                - gaelic_games
                - golf
                - gymnastics
                - handball
                - hockey
                - horse_racing
                - horse_riding
                - ice_hockey
                - ice_skating
                - ice_stock
                - judo
                - karate
                - karting
                - kitesurfing
                - korfball
                - laser_tag
                - long_jump
                - martial_arts
                - mini_tennis
                - miniature_golf
                - model_aerodrome
                - motocross
                - motor
                - mtb
                - multi
                - netball
                - orienteering
                - paddle_tennis
                - padel
                - paintball
                - paragliding
                - parkour
                - pelota
                - petanque
                - pickleball
                - pilates
                - racquet
                - rc_car
                - roller_skating
                - rowing
                - rugby
                - rugby_league
                - rugby_union
                - running
                - sailing
                - scuba_diving
                - shooting
                - skateboard
                - skating
                - ski
                - ski_jumping
                - skiing
                - skittles
                - snooker
                - soccer
                - squash
                - surfing
                - swimming
                - table_soccer
                - table_tennis
                - taekwondo
                - team_handball
                - tennis
                - toboggan
                - trampoline
                - ultralight_aviation
                - via_ferrata
                - volleyball
                - wakeboarding
                - water_ski
                - weightlifting
                - yoga
  power_generators:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: source
        type: string
        key: generator:source
      - name: method
        type: string
        key: generator:method
    type: geometry
    type_mappings:
      points:
        power:
          - generator
      polygons:
        power:
          - generator

  place_of_worships:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
        geometry_transform: point_on_surface
      - name: name
        type: string
        key: name
      - name: building
        type: string
        key: building
      - name: religion
        type: string
        key: religion
    type: point_or_polygon
    mapping:
      amenity:
        - place_of_worship

  aerialways:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: type
        type: mapping_value
      - name: name
        type: string
        key: name
      - name: ref
        type: string
        key: ref
    type: linestring
    mapping:
      aerialway:
        - __any__

  roads:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: type
        type: mapping_value
      - name: name
        type: string
        key: name
      - name: tunnel
        type: boolint
        key: tunnel
      - name: embankment
        type: boolint
        key: embankment
      - name: bridge
        type: boolint
        key: bridge
      - name: oneway
        type: direction
        key: oneway
      - name: cutting # TODO
        type: enumerate
        key: cutting
        args:
          values:
            - "yes"
            - left
            - right
      - name: ref
        type: string
        key: ref
      - name: z_order
        type: wayzorder
        key: layer
      - name: access
        type: string
        key: access
      - name: bicycle
        type: string
        key: bicycle
      - name: foot
        type: string
        key: foot
      - name: vehicle
        type: string
        key: vehicle
      - name: service
        type: string
        key: service
      - name: tracktype
        type: string
        key: tracktype
      - name: class
        type: mapping_key
      - name: trail_visibility
        type: enumerate
        key: trail_visibility
        args:
          values:
            - excellent
            - good
            - intermediate
            - bad
            - horrible
            - "no"
      - name: sac_scale
        type: enumerate
        key: sac_scale
        args:
          values:
            - hiking
            - mountain_hiking
            - demanding_mountain_hiking
            - alpine_hiking
            - demanding_alpine_hiking
            - difficult_alpine_hiking
      - name: fixme
        type: string
        key: fixme
    type: linestring
    filters:
      reject:
        area:
          - "yes"
    mappings:
      railway:
        mapping:
          railway:
            - abandoned
            - construction
            - disused
            - funicular
            - light_rail
            - monorail
            - narrow_gauge
            - preserved
            - rail
            - subway
            - tram
      roads:
        mapping:
          man_made:
            - pier
            - groyne
          route:
            - piste
          highway:
            - motorway
            - motorway_link
            - trunk
            - trunk_link
            - primary
            - primary_link
            - secondary
            - secondary_link
            - tertiary
            - tertiary_link
            - road
            - path
            - track
            - service
            - footway
            - bridleway
            - cycleway
            - steps
            - pedestrian
            - living_street
            - unclassified
            - residential
            - raceway
            - platform
            - construction
            - piste
            - escape
            - corridor
            - bus_guideway
            - via_ferrata
          railway:
            - platform
          public_transport:
            - platform
          attraction:
            - water_slide
          leisure:
            - track

  housenumbers:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
        geometry_transform: point_on_surface
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
      - name: addr:housenumber
        type: string
        key: addr:housenumber
      - name: addr:streetnumber
        type: string
        key: addr:streetnumber
      - name: addr:conscriptionnumber
        type: string
        key: addr:conscriptionnumber
    type: point_or_polygon
    mapping:
      addr:housenumber:
        - __any__
      addr:streetnumber:
        - __any__
      addr:conscriptionnumber:
        - __any__

  waterareas:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: name
        type: string
        key: name
      - name: type
        type: mapping_value
      - name: area
        type: webmerc_area
      - name: intermittent
        type: bool
        key: intermittent
      - name: seasonal
        type: bool
        key: seasonal
      - name: water
        type: string
        key: water
    type: polygon
    mapping:
      landuse:
        - basin
        - reservoir
      amenity:
        - swimming_pool
        - fountain
      leisure:
        - swimming_pool
      natural:
        - water
      waterway:
        - riverbank

  fixmes:
    columns:
      - name: osm_id
        type: id
      - name: geometry
        type: geometry
      - name: type
        type: mapping_value
    type: point
    mapping:
      fixme:
        - __any__
